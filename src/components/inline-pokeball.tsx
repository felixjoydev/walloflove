"use client";

import { useId } from "react";
import { motion } from "motion/react";

export function InlinePokeball() {
  const uid = useId();
  const clipId = `poke-clip${uid}`;
  return (
    <motion.span
      className="inline-block align-middle"
      animate={{
        rotate: [0, -12, 12, -8, 8, 0, 0, 0, 0, 0],
      }}
      transition={{
        duration: 2.5,
        repeat: Infinity,
        ease: "easeInOut",
        times: [0, 0.1, 0.2, 0.3, 0.4, 0.5, 0.6, 0.7, 0.8, 1],
      }}
    >
      <svg
        width="28"
        height="28"
        viewBox="0 0 40 40"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
      >
        <g clipPath={`url(#${clipId})`}>
          {/* Red top half */}
          <path d="M38.4276 12.2152C37.4205 9.83366 35.9789 7.69438 34.143 5.85784C32.3057 4.02185 30.166 2.57962 27.7855 1.57256C25.3198 0.529478 22.7001 0.000244141 20 0.000244141C17.3004 0.000244141 14.6808 0.5294 12.215 1.57256C9.83341 2.57962 7.69413 4.02192 5.85752 5.85784C4.0216 7.69438 2.57937 9.83366 1.57223 12.2152C0.529234 14.6811 0 17.3007 0 20.0002C0 22.7003 0.529156 25.32 1.57231 27.7857C2.57937 30.1662 4.02168 32.306 5.85759 34.1419C7.69413 35.9792 9.83341 37.4207 12.215 38.4278C14.6809 39.4703 17.3004 40.0001 20 40.0001C22.7002 40.0001 25.3199 39.4703 27.7856 38.4278C30.166 37.4206 32.3058 35.9791 34.143 34.1419C35.979 32.306 37.4206 30.1661 38.4277 27.7857C39.4702 25.32 40 22.7003 40 20.0002C39.9999 17.3007 39.4701 14.6811 38.4276 12.2152Z" fill="#ED5564" />
          {/* White bottom half */}
          <path d="M0.0078125 20.5615C0.0761739 23.0627 0.601033 25.4907 1.57216 27.7856C2.57922 30.166 4.02152 32.3058 5.85744 34.1418C7.69398 35.979 9.83326 37.4205 12.2149 38.4276C14.6807 39.4701 17.3003 39.9999 19.9999 39.9999C22.7 39.9999 25.3197 39.4701 27.7854 38.4276C30.1659 37.4205 32.3056 35.9789 34.1429 34.1418C35.9789 32.3058 37.4204 30.1659 38.4275 27.7856C39.3993 25.4907 39.9241 23.0627 39.9925 20.5615H0.0078125Z" fill="#E6E9ED" />
          {/* Dark band */}
          <path d="M39.9047 21.9702C39.9681 21.3183 39.9999 20.6615 39.9999 19.9999C39.9999 19.2565 39.9596 18.5192 39.8803 17.7898C38.8866 17.943 37.4596 18.1426 35.6616 18.3409C32.2484 18.7175 26.7626 19.1667 20 19.1667C13.2379 19.1667 7.75148 18.7175 4.33896 18.3409C2.54031 18.1425 1.11386 17.943 0.120238 17.7898C0.0403137 18.5192 0 19.2566 0 19.9999C0 20.6615 0.0317197 21.3183 0.0952372 21.9702C3.33986 22.4584 10.4883 23.3324 20 23.3324C29.5116 23.3324 36.66 22.4584 39.9047 21.9702Z" fill="#434A54" />
          {/* Center button â€” glows red on shake */}
          <CenterButton />
          {/* Dark ring around button */}
          <path d="M20 13.3333C15.8642 13.3333 12.5 16.6981 12.5 20.8332C12.5 24.9684 15.8643 28.3325 20 28.3325C24.1357 28.3325 27.4999 24.9683 27.4999 20.8332C27.4999 16.6981 24.1357 13.3333 20 13.3333ZM20 24.1676C18.1623 24.1676 16.6668 22.6709 16.6668 20.8332C16.6668 18.9954 18.1622 17.5001 20 17.5001C21.8384 17.5001 23.3324 18.9954 23.3324 20.8332C23.3324 22.6709 21.8384 24.1676 20 24.1676Z" fill="#434A54" />
          {/* Highlight */}
          <path opacity="0.2" d="M38.4268 12.215C37.4197 9.83341 35.9781 7.69413 34.1422 5.85759C32.3049 4.0216 30.1652 2.57937 27.7847 1.57231C25.319 0.529234 22.6993 0 19.9992 0C19.7203 0 19.4425 0.00609393 19.166 0.0171099C21.5715 0.114769 23.9054 0.636659 26.1173 1.57231C28.5 2.57937 30.6388 4.02168 32.4746 5.85759C34.3106 7.69413 35.7535 9.83341 36.7604 12.215C37.8041 14.6808 38.3315 17.3004 38.3315 20C38.3315 22.7001 37.8041 25.3198 36.7604 27.7856C35.7535 30.166 34.3106 32.3058 32.4746 34.1418C30.6388 35.979 28.5 37.4205 26.1173 38.4276C23.9054 39.3627 21.5714 39.8852 19.166 39.9828C19.4425 39.9938 19.7202 39.9999 19.9992 39.9999C22.6993 39.9999 25.319 39.4701 27.7847 38.4276C30.1652 37.4205 32.3049 35.9789 34.1422 34.1418C35.9781 32.3058 37.4197 30.166 38.4268 27.7856C39.4693 25.3198 39.9991 22.7001 39.9991 20C39.9991 17.3004 39.4693 14.6808 38.4268 12.215Z" fill="white" />
          {/* Shadow */}
          <path opacity="0.1" d="M1.57231 27.7857C2.57937 30.1662 4.02168 32.306 5.85759 34.1419C7.69413 35.9792 9.83341 37.4207 12.215 38.4278C14.6809 39.4703 17.3004 40.0001 20 40.0001C20.279 40.0001 20.5567 39.994 20.8332 39.983C18.4277 39.8853 16.0932 39.3628 13.8813 38.4278C11.4997 37.4206 9.36106 35.9791 7.52452 34.1419C5.68798 32.306 4.2463 30.1661 3.23861 27.7857C2.19545 25.32 1.66692 22.7004 1.66692 20.0002C1.66692 17.3006 2.19545 14.681 3.23853 12.2151C4.24622 9.83358 5.6879 7.69422 7.52444 5.85838C9.36098 4.02185 11.4996 2.57954 13.8812 1.57248C16.0931 0.636825 18.4276 0.114935 20.8331 0.0172759C20.5566 0.00633807 20.2789 0.000244141 20 0.000244141C17.3004 0.000244141 14.6808 0.5294 12.215 1.57256C9.83341 2.57962 7.69413 4.02192 5.85752 5.85846C4.0216 7.69438 2.57937 9.83366 1.57223 12.2152C0.529234 14.6811 0 17.3007 0 20.0002C0 22.7003 0.529234 25.32 1.57231 27.7857Z" fill="black" />
        </g>
        <defs>
          <clipPath id={clipId}>
            <rect width="40" height="40" fill="white" />
          </clipPath>
        </defs>
      </svg>
    </motion.span>
  );
}

function CenterButton() {
  return (
    <>
      {/* Glow layer (behind the button) */}
      <motion.circle
        cx="20"
        cy="20.833"
        r="5"
        animate={{
          fill: ["#E6E9ED00", "#ED556480", "#E6E9ED00", "#ED556480", "#E6E9ED00", "#ED556480", "#E6E9ED00", "#ED556480", "#E6E9ED00", "#E6E9ED00"],
          filter: [
            "blur(0px)", "blur(4px)", "blur(0px)", "blur(4px)",
            "blur(0px)", "blur(4px)", "blur(0px)", "blur(4px)",
            "blur(0px)", "blur(0px)",
          ],
        }}
        transition={{
          duration: 2.5,
          repeat: Infinity,
          ease: "easeInOut",
          times: [0, 0.1, 0.15, 0.2, 0.25, 0.3, 0.35, 0.4, 0.5, 1],
        }}
      />
      {/* Center button fill */}
      <motion.path
        d="M24.1683 20.833C24.1683 23.1346 22.3018 24.9999 20.0008 24.9999C17.6998 24.9999 15.834 23.1346 15.834 20.833C15.834 18.532 17.6998 16.6667 20.0008 16.6667C22.3018 16.6668 24.1683 18.532 24.1683 20.833Z"
        animate={{
          fill: ["#E6E9ED", "#ED5564", "#E6E9ED", "#ED5564", "#E6E9ED", "#ED5564", "#E6E9ED", "#ED5564", "#E6E9ED", "#E6E9ED"],
        }}
        transition={{
          duration: 2.5,
          repeat: Infinity,
          ease: "easeInOut",
          times: [0, 0.1, 0.15, 0.2, 0.25, 0.3, 0.35, 0.4, 0.5, 1],
        }}
      />
    </>
  );
}
